Rediseño barra Delay feedback (UI)
----------------------------------

- Ajustada la barra de Delay en modo feedback para que la parte inferior solo se coloree mientras el valor está en la mitad baja; al entrar en segmentos pequeños se mantiene solo el trazo de fondo.
- Incrementado el gap visual entre los 8 segmentos superiores a 2 px para que la separación sea claramente perceptible.
- Recalculada la geometría de los 8 segmentos pequeños en el semicírculo superior usando el mismo esquema angular que Loop/Oscillator, de modo que todos tienen la misma longitud de arco aunque exista el margen de 3 px del semicirculo.

Integración de rotación TUIO con Delay
--------------------------------------

- Añadido un manejo específico de rotación en MainComponent_Audio para DelayModule.
- Ahora el giro físico de la ficha controla el valor de la barra de Delay: 720º de giro producen un cambio completo de 0–1 en el parámetro.
- En modo feedback el giro actualiza `delay` (tiempo); en modo reverb actualiza `fb` (cantidad), manteniendo el resto de módulos con el comportamiento previo (Loop, Oscillator, etc.).

Ajuste marcador de Delay
------------------------

- El triángulo marcador de la barra de Delay pasa a seguir el valor continuo 0–1 a lo largo de todo el semicírculo, en lugar de encajarse en el centro del segmento activo.

# Progreso 2025-12-23

- Ajustada la barra lateral de Delay en `MainComponent_Paint` para que la parte inferior sea una barra continua y la parte superior muestre los 8 segmentos discretos, con un pequeño hueco entre ellos para que se perciban como divisiones separadas. La orientación se ha corregido de forma que los clics en la parte alta de la barra activan el segmento superior correspondiente y el triángulo indicador se alinea con ese segmento.
- Actualizado el mapeo de duraciones en el motor de audio (`AudioEngine`) para el modo de feedback del Delay: los 8 segmentos ahora representan las divisiones 8/4, 4/4, 2/4, 3/8, 1/4, 1/8, 1/16 y 1/32 de compás (ordenadas de más lenta a más rápida de arriba abajo), usando el BPM global para convertir beats a segundos antes de calcular el número de muestras del delay; el resto de valores por debajo de 1/32 siguen produciendo retardos aún más rápidos.

Overlay de nota para segmentos de Delay
--------------------------------------

- Añadido estado por módulo en `MainComponent` para recordar el último segmento pequeño activo del Delay en modo feedback y el instante en que se seleccionó.
- La interacción de la barra lateral de Delay (click/drag y rotación TUIO) ahora marca el segmento discreto correspondiente cuando el valor entra en la mitad superior de la barra, sin romper el control continuo 0–1.
- Implementado un overlay gráfico que dibuja, usando el atlas `atlas_2048`, el icono de figura rítmica correspondiente al segmento activo en la esquina superior izquierda del nodo de Delay; este icono se mantiene visible unos segundos y luego desaparece con un fundido similar al del overlay de BPM.

Carga de sesión inicial desde ruta relativa
------------------------------------------

- Modificado el constructor de `MainComponent` para que la ruta de sesión inicial (`initialSessionPath`) se resuelva siempre respecto al directorio de trabajo actual mediante `File::getCurrentWorkingDirectory().getChildFile`, evitando el assert de depuración de JUCE cuando se pasa un path relativo (por ejemplo `Reactive 2.rtz`) desde la línea de comandos.

Estabilidad de apagado del motor de audio
-----------------------------------------

- Añadido un método explícito `AudioEngine::shutdown` que retira el callback de `AudioDeviceManager` de forma idempotente.
- Llamada a `audioEngine_.shutdown()` desde `RectaiApplication::shutdown` tras destruir la ventana principal, para garantizar que no queden callbacks activos sobre `AudioEngine` mientras JUCE cierra el dispositivo ALSA en el destructor de `AudioDeviceManager`.
- El destructor de `AudioEngine` delega ahora en `shutdown()` para unificar la ruta de apagado; el cierre efectivo del dispositivo y del hilo ALSA se deja en manos del ciclo de vida estándar de JUCE.
